{% extends 'layout.html' %}

{% block title %}
<meta charset="UTF-8">
<title>Viewpost</title>
{% endblock %}

{% block content %}
<ul class="nav nav-tabs navbar-dark bg-dark">
  <li class="nav-item">
    <a class="nav-link " aria-current="page" href="/sub/{{ data[1] }} ">Description</a>
  </li>
  <li class="nav-item active dropdown">
    <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" href="#">Posts</a>
    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
      <li><a class="dropdown-item" href="/sub/{{ data[1] }}/creationpost">Créer un post</a></li>
    </ul>      
  </li>
  <li class="nav-item">
    <a class="nav-link disabled">Calendrier</a>
  </li>
  <li class="nav-item">
    <a class="nav-link disabled">Chat</a>
  </li>
</ul>

<body style = "background-color: rgb(73, 73, 73);">
  <h1 style = "margin: auto;text-align: center;padding: 20px;">Les derniers posts</h1>
  <div class="card-columns">
  {% for item in data[0] %}
      <div class="card bg-light mb-3" style="width : 50rem; margin:auto;">
        <div class="card-body">
            <h3 class="card-title">{{item[1]}}</h3>
            <p class="card-text">{{item[2]}}</p>
            <footer class = "blockquote-footer">Posté le {{item[4]}}</footer>
            <button class = "btn btn-block btn-secondary">LIKE</button>
            <button class = "btn btn-block btn-secondary">DISLIKE</button>
            <form  action='/comment/{{item[0]}}'  method = "POST">
              <label for='commentaire' style='padding-left: 1.5rem'>Votre commentaire :</label>
              <textarea  type='text' name='commentaire' rows="6" placeholder="écrivez votre commentaire..."
            required
              minlength='1' maxlength='500' style="height: 80px; width: 45rem; display: block;
              margin-left: auto;
              margin-right: auto;"></textarea>
              <input type= "submit" value="Submit" style="display: flex;
              justify-content: center; 
              width: 90px;
              border-radius: 4px;
              border-width: 1px;" >
            </input>
            </form>
        </div>
        <p>{{comments[item[0]]}}</p>
        <div class="btn-group dropup">
          <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style='width: 50rem;'>
            Commentaire
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenu2">
            {% for comment in comments[item[0]] %}
            <button class="dropdown-item" type="button">{{comment[0]}}</button>
            {% endfor %}
          </div>
        </div>
          
      </div>
  {% endfor %}
  </div>
</body>
{% endblock %}